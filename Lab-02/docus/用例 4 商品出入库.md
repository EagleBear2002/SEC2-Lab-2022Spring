# UC4 商品出入库

| **用例名称** | UC4 商品出入库                                               |
| ------------ | ------------------------------------------------------------ |
| **参与者**   | 库存管理人员，方便地提交记录出入库单和库存赠送单，更加高效地接收出入库单据的审核结果，提高库存管理效率<br/>总经理，目标是更加高效和方便地审批库存管理人员提交的出库入库单，提高库存管理效率 |
| **触发条件** | 从供应商那里进一批货<br/>销售后客户退一批货<br/>退掉一批从供应商那里进的货<br/>售出一批货<br/>需要赠送一些商品 |
| **前置条件** | 库存管理人员必须已经被识别和授权<br/>总经理必须已经被识别和授权<br/>还有没有处理的出入库单、库存赠送单 |
| **后置条件** | 存储出入库单<br/>存储库存赠送单<br/>更新库存数据             |
| **正常流程** | **1.0 出入库单、库存赠送单填写**<br/>1. 系统提示有出入库单、库存赠送单需要库存管理人员提交<br/>2. 库存管理人员点击需要处理的出入库单或者库存赠送单列表<br/>3. 系统显示状态为未审核和审核失败的出入库单列表或者库存赠送单列表<br/>4. 库存管理人员选择一个需要处理的出入库单或者库存赠送单<br/>5. 系统显示本次出入库单、库存赠送单的填写界面<br/>6. 库存管理人员输入出入库信息、库存赠送信息<br/>7. 库存管理人员提交审核<br/>8. 系统显示提交审核成功，显示该单据的状态为审核中，并且向总经理出入库审核事务、库存赠送审核事务中添加本次库存管理人员提交的出入库单据、库存赠送单据<br/>库存管理人员重复4~8步，直到处置完所有出入库单处置事件、库存赠送单处置事件 |
| **扩展流程** | 1.0.8a.系统显示内容输入有误：<br/>        1.保留之前库存管理人员的输入，显示错误信息（包括时间信息为空、商品或者赠品的具体信息为空、操作员不在库存管理人员列表），等待重新输入<br/><br/>**1.1 出入库单、库存赠送单审批**<br/>1. 系统提示有提交的出入库单、库存赠送单需要总经理处置<br/>2. 总经理点击需要处置的出入库单、库存赠送单列表<br/>3. 系统显示需要被处置的出入库单、库存赠送单列表<br/>4. 总经理选择一个需要处理的出入库单或者库存赠送单<br/>5. 系统显示该出入库单据的出入库信息或者库存赠送单的库存赠送信息<br/>6. 总经理通过审核<br/>    6.a总经理拒绝通过审核：<br/>         1. 系统显示拒绝成功，并且在库存管理人员需要处理的出入库单列表或者库存赠送单列表对该出入库单的状态或者库存赠送单的状态从审核中改为审核失败<br/>7. 系统显示提交审核结果成功，在库存管理人员需要处理的出入库单列表或者库存赠送单列表对该出入库单或者库存赠送单的状态从审核中改为审核通过<br/>总经理重复4~7步，直到处置完所有出入库单处置事件以及所有库存赠送单处置事件<br/><br/>**1.3 出入库单、库存赠送单完成**<br/>1. 系统提示有状态为审核通过的出入库单、库存赠送单需要库存管理人员处置<br/>2. 库存管理人员点击需要处理的出入库单、库存赠送单列表<br/>3. 系统显示状态为审核通过的出入库单、库存赠送单列表<br/>4. 库存管理人员选择一个需要处理的出入库单、库存赠送单<br/>5. 系统显示出入库单的出入库信息、库存赠送单的库存赠送信息<br/>6. 库存管理人员在完成现实中商品的进出货后，将该出入库单的状态改为已完成；库存管理人员在完成现实中的商品赠送后，将该库存赠送单的状态改为已完成<br/>7. 系统显示修改成功，更新库存数据并且存储该出入库单、库存赠送单<br/>库存管理人员重复4~7步，直到处置完所有出入库单处置事件、处置完所有库存赠送单处置事件 |
| **特殊需求** | 1. 出入库单的出入库信息包括：时间、操作员、出/入库类型（出库类型：进货/买家退货，入库类型：减库存/销售），这批商品的具体信息<br/>2. 库存赠送信息包括：时间、操作员、赠品的具体信息、赠送的用户信息、赠送原因 |